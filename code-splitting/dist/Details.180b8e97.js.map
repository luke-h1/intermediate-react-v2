{"version":3,"sources":["Carousel.js","ErrorBoundary.js","Details.js"],"names":["Carousel","React","Component","photos","active","event","setState","target","dataset","index","getDerivedStateFromProps","media","length","map","large","render","state","photo","handleIndexClick","ErrorBoundary","constructor","props","hasError","redirect","getDerivedStateFromError","componentDidCatch","error","info","console","componentDidUpdate","setTimeout","children","Modal","Details","loading","showModal","url","componentDidMount","pet","animal","id","then","name","type","location","contact","address","city","description","breed","breeds","primary","catch","err","theme","toggleModal","backgroundColor","adopt","DetailsErrorBoundary"],"mappings":";;;;;;;AAAA,AEAA,ADCA;;ACAA,ADCA;;ACAA;;AFAA,AECA,MFDMA,QAAN,SAAuBC,eAAMC,SAA7B,CAAuC;AAAA;AAAA,AEEvC,ADJA;AAIA,MAAMiB,aAAN,SAA4BjB,gBAA5B,CAAsC;ADFC,AEGvC,ADAEkB,EAAAA,WAAW,CAACC,KAAD,EAAQ,cDFX;AACNlB,ACEA,MDFAA,ICEMkB,EDFA,EAAE,CCER,CDHM;AAENjB,ACEA,MDFAA,GCEKY,GDFC,EAAE,ACER,GAAa;ADJP,ACISM,KDLoB,CCKpBA,QAAQ,EAAE,KAAZ;AAAmBC,MAAAA,QAAQ,EAAE;ADLP,ACKtB,KAAb,yCDSiBlB,KAAK,IAAI;AAC1B,ACTD,WDSMC,QAAL,CAAc;AACZF,QAAAA,MAAM,EAAE,CAACC,KAAK,CAACE,MAAN,CAAaC,OAAb,CAAqBC;AADlB,ACRhB,ODQE,ECRKe,wBAAP,GAAkC;ADWjC,ACVC,KDRmC,MCQ5B;ADR4B,AEIvC,ADIaF,MCJPU,ADIOV,KCJF,GAAG,ADIO,EAAE,eCJJ,MAAM,0CAAO,SAAP,EAAX,CAAd;ADIW,KAAP;ADHF,AEAF,ADIG,MCJGW,GFAGvB,IEAT,SAAsBT,WFApB,CAAgC,GEANC,SAA5B,CAAsC;AFAFS,AEAE,IFAFA;AAAF,AEAI,ADKpCc,EAAAA,CDLA,EAA2C,cCK1B,CAACC,KAAD,EAAQC,IAAR,EAAc;ADJ7B,ACKAC,IAAAA,IDLIzB,GCKG,CAACuB,EDLE,GAAG,ACKb,CDLc,ACKA,+BDLD,ACKb,CDLA,CCK+CA,KAA/C,EAAsDC,IAAtD;ACNkC,ADOnC,mCCNO;AFEN,AEFQO,MAAAA,EFEJvB,KAAK,AEFM,CFELC,CEFO,IAAX,CFEN,EAAkB;AAChBT,AEHqBgC,ADOzBN,EAAAA,IDJI1B,AEHqBgC,MFGf,GAAGxB,AEHqB,EAAE,GFGlB,ACIA,CDJCE,ECIE,CDJR,CAAU,CAAC;AAAEC,AEHlB,ADQN,KCTkC,GFIVA,ACKpB,KAAKE,KAAL,CAAWM,QAAf,EAAyB;ADLH,ACMpBQ,MAAAA,CDNmB,KAAehB,ICMxB,CDND,ACME,CDNX,KCMiB,KAAKR,QAAL,CAAc;ADLhC,AELiC,ADUCiB,QAAAA,QAAQ,EAAE,uBCWjC,MAAM,KAAKjB,QAAL,CAAc;AAAE6B,ADXD,MCWCA,CDXf,CAAP,EAA0C,IAA1C,CCW+B,ADXzC,ECW2C,CAAC,KAAKnB,KAAL,CAAWmB;AFdzD,AEcgC,ADV/B,KCUiB,CArBgB,KFO3B;AAAEhC,ACKV,MDLUA;AAAF,AEP2B,KFOlC,8BEeM,MAAM,sBAAS,KAAKa,KAAL,CAAWoB,GAApB,CAtBsB;AFQnC,AERmC,ADapCrB,EAAAA,MAAM,GAAG;AACP,QAAI,KAAKC,KAAL,CAAWO,QAAf,EAAyB;ADA3BR,AEZAsB,ADaI,EDDJtB,AEZAsB,MFYM,GAAG,ECCE,MCbM,GAAG,oBDaR,gBAAD;ADAT,AEZAC,ADYmB,QAAA,EDAb,ACAe,EAAC,GAAb,ECXNC,MADH,CACU,KAAKlB,KAAL,CAAWmB,EADrB,EAEGC,IAFH,CAEQ,CAAC;AFUDtC,AEVGoC,ADUe,MDAlBpC,AEVGoC,EDUe,IDApB,GCA2B;ADAjBnC,AEVP,ADUA,KCVD,CFUQA,ECAd,ECVsB;AFUlB,AETF,ADUH,QDD0B,GETlBE,EFSuBU,KAAhC,CETI,CAAc;AFUlB,AETMoB,QAAAA,GFUJ,AEVO,EAAEG,MAAM,CAACH,GADA;AFWX,AETDM,ADUN,MDDO,EETDA,ADUF,ICVM,CDUD1B,CCVGuB,CFSI,EAAC,CCCb,CAAWjB,CCVG,CAACoB,IAFD,EDYlB,EAAyB;ADDvB,AERIH,ADUJ,ODDE,CETEA,KDWF,CCXQ,EAAEA,MAAM,CAACI,IAHH,qEDe0B,6BAAC,YAAD;ADHnC,AERHC,ADW4C,MDHzC,EERHA,ADW4C,CDHtC,CCGwC,CDHtCzC,CCGuC,ICXvC,CFQM,CAACC,AERJ,GAAEmC,GFQC,CAAhB,EERqB,CAACM,OAAP,CAAeC,OAAf,CAAuBC,IAAK,KACvCR,MAAM,CAACM,OAAP,CAAeC,OAAf,CAAuB9B,KACxB,EANW;AFYY,AELxBgC,ADQsC,MDHd,EELxBA,CFK2B,EAAC,QELjB,EAAET,CDOf,EACuE,GCRlD,ADOrB,CCPsBS,WAPR,sCDahB;ADDE,AEJErC,ADWL,MDRC,EAEE,AELEA,KAAK,EAAE4B,MAAM,CAACpC,MARF;AFaT,AEJH8C,MFIG,EEJHA,KAAK,EFIO,AEJLV,EFIM,IEJA,CAACW,MAAP,CAAcC,OATT;AFad,AEHEjB,ADWN,ODPO/B,CEJD+B,GDWC,EDPM,CAACrB,CEJD,CDWDQ,CDPL,AEJQ,CFIG,CAACJ,ECOZ,CAAWc,EDPA,EAAQtB,ICO1B,CDPkB,KACV;AACA,AEhBU,ADsBnB,OCtBK;AFiBM,AELP,KAfH,CFoBU,CEJP2C,EFIU,EAAEnC,CEpBf,CAgBSoC,GFGD,AEHI,IAAI,KAAK/C,QAAL,CAAc;AFKpB,AELsBoB,ADtBE,MD2BxB,AELsBA,KAAK,EFKpB,AELsB2B,EFKpB,KAAKnC,gBAFhB;AAGE,AENoB,KAAd,CAhBhB,cFsBsBT,KAHd;AAIE,AENX,MFMW,GAAG,EAAEQ,ICKJE,CDTH;AAKE,MAAA,SAAS,EAAEV,KAAK,KAAKL,MAAV,GAAmB,QAAnB,GAA8B,EAL3C;AAME,AELZW,EAAAA,IFKY,EELN,CFKS,EAAC,AELP;AFDC,AEER,MFJO,CADH,CAFF,AEOE,CFRJ,IEQSC,KAAL,CAAWkB,OAAf,EAAwB;AFUzB,AETG,aAAO,2DAAP;AACD;AF/BkC;AEiCnC,UAAM;AACJK,MAAAA,MADI,GFSKvC;AEPTiD,MAAAA,KAFI;AAGJL,MAAAA,QAHI;AAIJI,MAAAA,WAJI;AAKJrC,MAAAA,KALI;AAMJ+B,MAAAA,IANI;AAOJP,MAAAA;AAPI,QAQF,KAAKnB,KART;AAUA,WACE;AAAK,MAAA,SAAS,EAAC;AAAf,OACE,6BAAC,iBAAD;AAAU,MAAA,KAAK,EAAEL;AAAjB,MADF,EAEE,0CACE,yCAAK+B,IAAL,CADF,EAEE,yCAAM,GAAEH,MAAO,MAAKU,KAAM,MAAKL,QAAS,EAAxC,CAFF,EAGE,6BAAC,qBAAD,CAAc,QAAd,QACG,CAAC,CAACU,KAAD,CAAD,KACC;AACE,MAAA,OAAO,EAAE,KAAKC,WADhB;AAEE,MAAA,KAAK,EAAE;AAAEC,QAAAA,eAAe,EAAEF;AAAnB;AAFT,iBAISZ,IAJT,CAFJ,CAHF,EAaE,wCAAIM,WAAJ,CAbF,EAcGb,SAAS,GACR,6BAAC,KAAD,QACE,qEAA6BO,IAA7B,MADF,EAEE;AAAK,MAAA,SAAS,EAAC;AAAf,OACE;AAAQ,MAAA,OAAO,EAAE,KAAKe;AAAtB,aADF,EAEE;AAAQ,MAAA,OAAO,EAAE,KAAKF;AAAtB,4BAFF,CAFF,CADQ,GAQN,IAtBN,CAFF,CADF;AA6BD;;AAnEmC;;AAsEvB,SAASG,oBAAT,CAA8BrC,KAA9B,EAAqC;AAClD,SACE,6BAAC,sBAAD,QACE,6BAAC,OAAD,EAAaA,KAAb,CADF,CADF;AAKD","file":"Details.180b8e97.js","sourceRoot":"../src","sourcesContent":["import React from \"react\";\n\nclass Carousel extends React.Component {\n  state = {\n    photos: [],\n    active: 0\n  };\n  static getDerivedStateFromProps({ media }) {\n    let photos = [\"http://placecorgi.com/600/600\"];\n\n    if (media.length) {\n      photos = media.map(({ large }) => large);\n    }\n\n    return { photos };\n  }\n  handleIndexClick = event => {\n    this.setState({\n      active: +event.target.dataset.index\n    });\n  };\n  render() {\n    const { photos, active } = this.state;\n    return (\n      <div className=\"carousel\">\n        <img src={photos[active]} alt=\"animal\" />\n        <div className=\"carousel-smaller\">\n          {photos.map((photo, index) => (\n            // eslint-disable-next-line\n            <img\n              key={photo}\n              onClick={this.handleIndexClick}\n              data-index={index}\n              src={photo}\n              className={index === active ? \"active\" : \"\"}\n              alt=\"animal thumbnail\"\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Carousel;\n","// mostly code from reactjs.org/docs/error-boundaries.html\nimport React, { Component } from \"react\";\nimport { Link, Redirect } from \"@reach/router\";\n\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, redirect: false };\n  }\n  static getDerivedStateFromError() {\n    return { hasError: true };\n  }\n  componentDidCatch(error, info) {\n    console.error(\"ErrorBoundary caught an error\", error, info);\n  }\n  componentDidUpdate() {\n    if (this.state.hasError) {\n      setTimeout(() => this.setState({ redirect: true }), 5000);\n    }\n  }\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to=\"/\" noThrow />;\n    }\n\n    if (this.state.hasError) {\n      return (\n        <h1>\n          There was an error with this listing. <Link to=\"/\">Click here</Link>{\" \"}\n          to back to the home page or wait five seconds\n        </h1>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","import React, { lazy } from \"react\";\nimport pet from \"@frontendmasters/pet\";\nimport { navigate } from \"@reach/router\";\nimport Carousel from \"./Carousel\";\nimport ErrorBoundary from \"./ErrorBoundary\";\nimport ThemeContext from \"./ThemeContext\";\nconst Modal = lazy(() => import(\"./Modal\"));\nclass Details extends React.Component {\n  state = { loading: true, showModal: false };\n  componentDidMount() {\n    pet\n      .animal(this.props.id)\n      .then(({ animal }) => {\n        this.setState({\n          url: animal.url,\n          name: animal.name,\n          animal: animal.type,\n          location: `${animal.contact.address.city}, ${\n            animal.contact.address.state\n          }`,\n          description: animal.description,\n          media: animal.photos,\n          breed: animal.breeds.primary,\n          loading: false\n        });\n      })\n      .catch(err => this.setState({ error: err }));\n  }\n  toggleModal = () => this.setState({ showModal: !this.state.showModal });\n  adopt = () => navigate(this.state.url);\n  render() {\n    if (this.state.loading) {\n      return <h1>loading … </h1>;\n    }\n\n    const {\n      animal,\n      breed,\n      location,\n      description,\n      media,\n      name,\n      showModal\n    } = this.state;\n\n    return (\n      <div className=\"details\">\n        <Carousel media={media} />\n        <div>\n          <h1>{name}</h1>\n          <h2>{`${animal} — ${breed} — ${location}`}</h2>\n          <ThemeContext.Consumer>\n            {([theme]) => (\n              <button\n                onClick={this.toggleModal}\n                style={{ backgroundColor: theme }}\n              >\n                Adopt {name}\n              </button>\n            )}\n          </ThemeContext.Consumer>\n          <p>{description}</p>\n          {showModal ? (\n            <Modal>\n              <h1>Would you like to adopt {name}?</h1>\n              <div className=\"buttons\">\n                <button onClick={this.adopt}>Yes</button>\n                <button onClick={this.toggleModal}>No, I am a monster</button>\n              </div>\n            </Modal>\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default function DetailsErrorBoundary(props) {\n  return (\n    <ErrorBoundary>\n      <Details {...props} />\n    </ErrorBoundary>\n  );\n}\n"]}